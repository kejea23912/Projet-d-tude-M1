---
title: "exemple de presentation"
author:
- "Kenny Jean-elie"
- Ibrahima Caba Bah
- Fatou Diop Ndeye
date: "`r Sys.Date()`"
output:
  beamer_presentation:
    slide_level: 2
    theme: Madrid
    colortheme: dolphin
    highlight: tango
  ioslides_presentation:
    highlight: tango
  slidy_presentation:
    highlight: tango
---

```{r setup,include = FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message = FALSE)
```

```{r, Importation des librairies , include=FALSE}
library(tidyverse)
library(FactoMineR)
library(factoextra)
library(Factoshiny)
library(kableExtra)

```


```{r, Importaion de la base de données , include=FALSE}
dfbefore<-read.csv("basse_final.csv",sep = ",", dec = ".",header = TRUE)[,-1]
head(df)
```

```{r, traitement de la basse de donnée, include=FALSE}
#dans ce chunk on élimine les ligne qui posedent au moins un NA dans ces variables
sum(is.na(dfbefore))
df <- na.omit(dfbefore)

```



# Introduction

Bienvenue dans cette mini présentation Beamer avec R Markdown.

## Objectif

- Montrer une slide avec deux colonnes
- Combiner un graphique et un commentaire

## Slide avec deux colonnes

:::: columns
::: {.column width="50%"}
```{r, echo=FALSE}
plot(pressure, main = "Courbe de pression")
``` 
::: 

::: {.column width="50%"}
"Cette diapositive utilise deux colonnes. À gauche, nous avons un graphique représentant la relation entre la température et la pression. À droite, nous avons ce commentaire explicatif."
:::

::::





# ACP

## inertie 
```{r}
nrow(df)
length(unique(df$adresse))
length(unique(df$etiquette_dpe))
length(unique(df$numero_dpe))
```

# Analyse des Correspondances Factorielles
```{r, echo= FALSE}
res.CA<-CA(df[,-c(4,5)],quali.sup=c(4,5),quanti.sup=c(1,3,6,11),graph=FALSE)

fviz_ca(res.CA,
        col.quali.sup = "#FF00FF",
        repel = TRUE,
        label = c("var","quali")) +
  theme_minimal() +                # thème épuré
  theme(plot.title = element_text(size=16, face="bold", color="darkblue", a=0.1),
        axis.title = element_text(size=14, face="italic"),
        legend.position = "bottom")


```





## Présentation générale de l'ACF



##  Description des variables

### Variables actives: 
Étiquette_dpe, Étiquette_ges, Année_construction, Nombre_appartement


### Variables quantitatives supplémentaires:
Consommation.annuelle..., Surface_habitable, Émission_ges_5_usages, Coût_total_5_usages

### variable exclue:
Adresse, Numero_dpe, Conso_5_usages_ef, Consommation.annuelle.moyenne...


## Qualité globale de l'ACF

:::: columns
::: {.column width="50%"}
```{r, echo=FALSE}
fviz_screeplot(res.CA, addlabels =TRUE, barfill = "blue")
``` 
::: 

::: {.column width="50%"}
L'Axe 1 et 2 cumulent `r round(res.CA$eig[1,3]+res.CA$eig[2,3],1)` % de l'inertie total

:::

::::

## interprétation de l'axe 1 

## interprétation de l'axe 2

## Analyse des individus

## synthèse finale






# ACM 

```{r}
df2 <-df %>% 
  rename(Conso_totale = Consommation.annuelle.totale.de.l.adresse..MWh., Conso_Moy_log = Consommation.annuelle.moyenne.par.logement.de.l.adresse..MWh.,Conso_com = Consommation.annuelle.moyenne.de.la.commune..MWh. ) %>% 
  select(-adresse, -numero_dpe)

str(df2)
```
## Conversion des variables qualitatives en factor et decoupage en classe
```{r}
qualitative_cols<-c("etiquette_dpe","etiquette_ges")
df2[qualitative_cols]<-lapply(df2[qualitative_cols], as.factor)
quantitative_cols<-c("Conso_totale","Conso_Moy_log","Conso_com","annee_construction","surface_habitable_logement","conso_5.usages_ef","emission_ges_5_usages","cout_total_5_usages","nombre_appartement")
df2[quantitative_cols] <- lapply(df2[quantitative_cols], function(x) {
  cut(x,
      breaks = unique(quantile(x, probs = seq(0, 1, 0.25), na.rm = TRUE)),
      include.lowest = TRUE
  )
})
str(df2)

```
```{r}
quali.sup = c(4,5)
```

## Mise en Oeuvre de l'ACM

```{r}
ACM<-MCA(df2, quali.sup = quali.sup, graph = F, ncp = Inf)
```
### Inertie
```{r}
ACM$eig
```

### Graphique des Inerties 
```{r}
fviz_eig(ACM)
```



#








# Mise en Oeuvre de la clasification non supervisée à partir de l'ACM
On commence par faire par faire une classification hierarchique ascendante sur la sortie de l'ACM avec consolidation puis faire la méthodes **k-means** 
```{r}
ACM_HCPC<-HCPC(ACM, graph = F, consol = F, cex = 0.3)
```

```{r}
#fviz_dend(ACM_HCPC, main = "cluster with Ward method")
```



## reste 